
actio_home {
  type = "file"
  behavior = "txt"
}

  script {
    settings {
      namespace = "actio.datapipes.task.Term.Functions"
      version = "v2"
    }
    tasks {
      read_api {
        type = "extract"
        dataSource = ${actio_home}
        dataSource {
          query {
            read {
              directory = "./"
              filenameTemplate = "test2.conf"
            }
          }
        }
      }
      create_merged_conf {
        type = load
        dataSource {
          type = "file"
          behavior = "txt"
          query {
            create {
              directory = "./"
              filenameTemplate = "test_merged.conf"
              line = "${this.line}"
            }
          }
        }
      }
    }
    pipelines {
      p_boot {
        schedule {
          cron = "30 * * * * ?"
        }
        pipe = "read_api | create_merged_conf"
      }
    }
    startup {
      exec = "p_boot"
    }
  }
